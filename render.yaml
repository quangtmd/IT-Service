# render.yaml blueprint
# Defines the services for deploying the IT-Service application on Render.
# Use this with a "New Blueprint Instance" on the Render dashboard.

services:
  # Backend Node.js service
  - type: web
    name: it-service-backend  # A unique name for the backend service
    env: node
    plan: free                # Use Render's free instance type
    rootDir: backend
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: DB_HOST
        value: 194.59.164.14
      - key: DB_USER
        value: u573621538_IT
      - key: DB_PASSWORD
        value: A@a0908225224
      - key: DB_NAME
        value: u573621538_Itservice

  # Frontend React static site
  - type: static_site
    name: it-service-frontend # A unique name for the frontend service
    plan: free                 # Use Render's free instance type
    buildCommand: npm install && npm run build
    publishDir: dist
    routes:
      - type: rewrite
        source: "/*"
        destination: "/index.html"
    envVars:
      - key: VITE_GEMINI_API_KEY
        value: AIzaSyDM-mq8w_BNFY5S43lpZqwkHfVXM2ZKBXs
      # Automatically links the live URL of the backend to the frontend.
      - key: VITE_BACKEND_API_BASE_URL
        fromService:
          type: web
          name: it-service-backend # This MUST match the backend service name above
          property: url